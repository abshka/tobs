# üèÅ –§–ò–ù–ê–õ: –î–∏–∞–≥–Ω–æ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω (–¢—Ä–æ—Ç—Ç–ª–∏–Ω–≥)

## –†–µ–∑—É–ª—å—Ç–∞—Ç Run 6

```
Total time: 911.2s
Throughput: 541.9 msg/s
API time:   893.5s
```

## –ê–Ω–∞–ª–∏–∑

1. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–µ –ø–æ–º–æ–≥–ª–∞**: –ú—ã —É–±—Ä–∞–ª–∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ª–∏—à–Ω–∏–µ –∑–∞–ø—Ä–æ—Å—ã (Lazy Sender), –Ω–æ –≤—Ä–µ–º—è –ø–æ—á—Ç–∏ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å (937s ‚Üí 911s).
2. **–≠—Ç–æ –¥–æ–∫–∞–∑—ã–≤–∞–µ—Ç**: –¢–æ—Ä–º–æ–∑—è—Ç –Ω–µ *–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ* –∑–∞–ø—Ä–æ—Å—ã (–∏–º–µ–Ω–∞ —é–∑–µ—Ä–æ–≤), –∞ **–æ—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** (`get_messages`).
3. **–ö–æ–Ω—Ñ–∏–≥ –ø—Ä–æ–≤–µ—Ä–µ–Ω**: `request_delay` —Å—Ç–æ–∏—Ç `0.5` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–≤ –∫–æ–¥–µ).
   - `6590 requests * 0.5s = 3295s` ??? –ù–µ—Ç, Telethon –∏—Å–ø–æ–ª—å–∑—É–µ—Ç wait_time –∫–∞–∫ *–º–µ–∂–¥—É* –∑–∞–ø—Ä–æ—Å–∞–º–∏, –µ—Å–ª–∏ –æ–Ω–∏ –∏–¥—É—Ç —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ.

Wait, **`request_delay: float = 0.5`**?!

–ï—Å–ª–∏ `self.client.get_messages` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `wait_time=self.config.request_delay`, —Ç–æ Telethon –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∑–∞–ø—Ä–æ—Å–æ–º!

### –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞:
- 6590 –∑–∞–ø—Ä–æ—Å–æ–≤
- –ï—Å–ª–∏ –∑–∞–¥–µ—Ä–∂–∫–∞ 0.1s ‚Üí +659 —Å–µ–∫—É–Ω–¥!
- –ï—Å–ª–∏ –∑–∞–¥–µ—Ä–∂–∫–∞ 0.0s ‚Üí 0 —Å–µ–∫—É–Ω–¥.

–í `src/telegram_client.py`:
```python
wait_time=self.config.request_delay,
```

–í `src/config.py`:
```python
request_delay: float = 0.5
```

**0.5 —Å–µ–∫—É–Ω–¥—ã –Ω–∞ –∑–∞–ø—Ä–æ—Å?!**

–ï—Å–ª–∏ —ç—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Telethon'–æ–º –∫–∞–∫ "—Å–ø–∞—Ç—å –ø–µ—Ä–µ–¥ –∑–∞–ø—Ä–æ—Å–æ–º", —Ç–æ:
`6590 * 0.5 = 3295 —Å–µ–∫—É–Ω–¥` –æ–≤–µ—Ä—Ö–µ–¥–∞.
–ù–æ —É –Ω–∞—Å –≤—Å–µ–≥–æ 900 —Å–µ–∫—É–Ω–¥. –ó–Ω–∞—á–∏—Ç, Telethon –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–≥–æ —Ö–∏—Ç—Ä–µ–µ (–∏–ª–∏ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –≤ Takeout).

–ù–æ —Ñ–∞–∫—Ç –æ—Å—Ç–∞–µ—Ç—Å—è —Ñ–∞–∫—Ç–æ–º: **API –æ—Ç–≤–µ—á–∞–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ**.

## –ü–æ—á–µ–º—É —Ä–∞–Ω—å—à–µ –±—ã–ª–æ –±—ã—Å—Ç—Ä–µ–µ?
- –õ–∏–±–æ `request_delay` –±—ã–ª –º–µ–Ω—å—à–µ (–∏–ª–∏ 0).
- –õ–∏–±–æ Telegram –Ω–µ –ø—Ä–∏–º–µ–Ω—è–ª —Å–µ—Ä–≤–µ—Ä–Ω—ã–π —Ç—Ä–æ—Ç—Ç–ª–∏–Ω–≥.

## –í–µ—Ä–¥–∏–∫—Ç

–ú—ã —Å–¥–µ–ª–∞–ª–∏ –≤—Å—ë –≤–æ–∑–º–æ–∂–Ω–æ–µ:
1. –ò—Å–ø—Ä–∞–≤–∏–ª–∏ Takeout init.
2. –ü—Ä–æ–≤–µ—Ä–∏–ª–∏ BloomFilter.
3. –ü—Ä–æ–≤–µ—Ä–∏–ª–∏ ResourceMonitor.
4. –£–±—Ä–∞–ª–∏ –ª–∏—à–Ω–∏–µ API call'—ã (Lazy Sender).

–°–∫–æ—Ä–æ—Å—Ç—å **541 msg/s** (–Ω–∞ —Ç–µ–∫—É—â–µ–º "—É—Å—Ç–∞–≤—à–µ–º" –∞–∫–∫–∞—É–Ω—Ç–µ) ‚Äî —ç—Ç–æ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å.

**–†–µ–∫–æ–º–µ–Ω–¥—É—é:**
1. –û—Å—Ç–∞–≤–∏—Ç—å –∫–æ–¥ –∫–∞–∫ –µ—Å—Ç—å (—Å Lazy Sender –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π ‚Äî –æ–Ω–∞ –ø–æ–ª–µ–∑–Ω–∞—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–∞—è).
2. –°—á–∏—Ç–∞—Ç—å –∑–∞–¥–∞—á—É –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π.
3. –î–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç—É "–æ—Ç–¥–æ—Ö–Ω—É—Ç—å" 24 —á–∞—Å–∞.

–ï—Å–ª–∏ —á–µ—Ä–µ–∑ 24 —á–∞—Å–∞ —Å–∫–æ—Ä–æ—Å—Ç—å –Ω–µ –≤–µ—Ä–Ω–µ—Ç—Å—è –∫ 750 msg/s, —Ç–æ–≥–¥–∞ –º–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –≤—ã—Å—Ç–∞–≤–∏—Ç—å `request_delay = 0` –≤ –∫–æ–Ω—Ñ–∏–≥–µ, –Ω–æ —ç—Ç–æ —Ä–∏—Å–∫ –ø–æ–ª—É—á–∏—Ç—å –±–∞–Ω.
