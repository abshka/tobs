# üöÄ LAZY SENDER OPTIMIZATION (TIER B-5)

## –ü—Ä–æ–±–ª–µ–º–∞: "–°–∫—Ä—ã—Ç—ã–π —É–±–∏–π—Ü–∞" (Hidden Killer)

–í –º–µ—Ç–æ–¥–µ `_get_sender_name` (–≥–æ—Ä—è—á–∏–π –ø—É—Ç—å) –±—ã–ª–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —É—è–∑–≤–∏–º–æ—Å—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

```python
# –ë–´–õ–û:
if not message.sender:
    # ‚ö†Ô∏è DANGER: –°–µ—Ç–µ–≤–æ–π –∑–∞–ø—Ä–æ—Å –Ω–∞ –∫–∞–∂–¥—ã–π –ø—Ä–æ–º–∞—Ö –∫–µ—à–∞!
    resolved = await self.telegram_manager.resolve_entity(sender_id)
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
1. –ï—Å–ª–∏ `message.sender` –Ω–µ –ø—Ä–∏—à–µ–ª —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º (—á–∞—Å—Ç–æ –≤ —Ñ–æ—Ä—É–º–∞—Ö/–±–æ–ª—å—à–∏—Ö —á–∞—Ç–∞—Ö)...
2. ...–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–µ—à–µ (1000 —ç–ª–µ–º–µ–Ω—Ç–æ–≤)...
3. ...–≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `get_entity` (API Request).
4. –ù–∞ 493k —Å–æ–æ–±—â–µ–Ω–∏–π —ç—Ç–æ –º–æ–∂–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å **—Ç—ã—Å—è—á–∏ –ª–∏—à–Ω–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤**.
5. Telegram —Ä–µ–∞–≥–∏—Ä—É–µ—Ç **FloodWait** (—Ç—Ä–æ—Ç—Ç–ª–∏–Ω–≥).

## –†–µ—à–µ–Ω–∏–µ: Zero-Network Resolution

–ú—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–ø—Ä–µ—Ç–∏–ª–∏ —Å–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Ä–∞–¥–∏ –∏–º–µ–Ω–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è.

```python
# –°–¢–ê–õ–û:
if not message.sender:
    # üöÄ OPTIMIZATION: –ù–∏–∫–∞–∫–∏—Ö —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤!
    # –ï—Å–ª–∏ –∏–º–µ–Ω–∏ –Ω–µ—Ç –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ -> –∏—Å–ø–æ–ª—å–∑—É–µ–º ID
    return f"User {sender_id}"
```

## –ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ?

1. **–°–∫–æ—Ä–æ—Å—Ç—å**: –ò–∑–±–∞–≤–ª–µ–Ω–∏–µ –æ—Ç N*API –∑–∞–ø—Ä–æ—Å–æ–≤.
2. **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏—á–∏–Ω—ã —Ç—Ä–æ—Ç—Ç–ª–∏–Ω–≥–∞.
3. **–ü—Ä–∏–µ–º–ª–µ–º–æ—Å—Ç—å**: –î–ª—è –∞—Ä—Ö–∏–≤–∞ –ø–µ—Ä–µ–ø–∏—Å–∫–∏ "User 123456" –ª—É—á—à–µ, —á–µ–º –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞—Ä—Ö–∏–≤–∞ –∏–∑-–∑–∞ –æ—à–∏–±–∫–∏. –í 99% —Å–ª—É—á–∞–µ–≤ `message.sender` –∏ —Ç–∞–∫ –µ—Å—Ç—å (Telethon –µ–≥–æ –ø—Ä–∏—Å—ã–ª–∞–µ—Ç), —Ç–∞–∫ —á—Ç–æ –∏–º–µ–Ω–∞ –±—É–¥—É—Ç. –§–æ–ª–±—ç–∫ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–µ–¥–∫–∏—Ö/—É–¥–∞–ª–µ–Ω–Ω—ã—Ö —é–∑–µ—Ä–æ–≤.

## –û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç

- **–ò—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ "–∑–∞–≤–∏—Å–∞–Ω–∏–π"** (–∫–æ—Ç–æ—Ä—ã–µ –º—ã –ø—Ä–∏–Ω–∏–º–∞–ª–∏ –∑–∞ —Å–µ—Ç–µ–≤—É—é –≤–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å).
- **–°–Ω–∏–∂–µ–Ω–∏–µ API Time** (—É–π–¥—É—Ç —Å–∫—Ä—ã—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã).
- **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ Throughput** –∫ baseline.

## –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

–ó–∞–ø—É—Å—Ç–∏—Ç–µ **Run 6** (–∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π):
```bash
python -m tobs export
```

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ —ç—Ç–æ–º, –≤—Ä–µ–º—è –¥–æ–ª–∂–Ω–æ —Ä–µ–∑–∫–æ —É–ø–∞—Å—Ç—å (–≤–æ–∑–º–æ–∂–Ω–æ, –¥–∞–∂–µ –Ω–∏–∂–µ baseline 643s)!
