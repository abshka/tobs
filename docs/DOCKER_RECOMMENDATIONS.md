# –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## üéØ –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ

–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ Docker —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞. –ù–∞–π–¥–µ–Ω–æ **13 –ø—Ä–æ–±–ª–µ–º**, –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö:
- üî¥ **3 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ** - —Ç—Ä–µ–±—É—é—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- üü° **7 –≤–∞–∂–Ω—ã—Ö** - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è
- üü¢ **3 –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö** - –º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å

---

## üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (P0)

### 1. –ò–∑–±—ã—Ç–æ—á–Ω–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
**–§–∞–π–ª:** `Dockerfile`, —Å—Ç—Ä–æ–∫–∏ 29-30  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `uv pip compile` + `uv pip install` –≤–º–µ—Å—Ç–æ `uv sync`  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ `uv sync --frozen --no-dev`  
**–≠—Ñ—Ñ–µ–∫—Ç:** –£—Å–∫–æ—Ä–µ–Ω–∏–µ —Å–±–æ—Ä–∫–∏ –Ω–∞ 20-30%

### 2. –ó–∞–ø—É—Å–∫ –æ—Ç root –≤ run-tobs.sh
**–§–∞–π–ª:** `run-tobs.sh`, —Å—Ç—Ä–æ–∫–∞ 16  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `--user root` –≤–º–µ—Å—Ç–æ –Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ `--user 1000:1000`  
**–≠—Ñ—Ñ–µ–∫—Ç:** –ü–æ–≤—ã—à–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### 3. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ healthcheck
**–§–∞–π–ª—ã:** `Dockerfile`, `docker-compose.yml`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å HEALTHCHECK –≤ Dockerfile –∏ healthcheck –≤ compose  
**–≠—Ñ—Ñ–µ–∫—Ç:** –£–ª—É—á—à–µ–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

---

## üü° –í–∞–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (P1)

### 4. –£—Å—Ç–∞—Ä–µ–≤—à–∞—è –≤–µ—Ä—Å–∏—è uv
**–§–∞–π–ª:** `Dockerfile`, —Å—Ç—Ä–æ–∫–∞ 7  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–∏—Ç—å –¥–æ `latest` –∏–ª–∏ `0.5.0+`

### 5. –•–∞—Ä–¥–∫–æ–¥ GID 988
**–§–∞–π–ª—ã:** `docker-compose.yml` (—Å—Ç—Ä–æ–∫–∞ 60), `run-tobs.sh` (—Å—Ç—Ä–æ–∫–∞ 19)  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `${RENDER_GID:-988}`

### 6. –£—Å—Ç–∞—Ä–µ–≤—à–∞—è –≤–µ—Ä—Å–∏—è docker-compose
**–§–∞–π–ª:** `docker-compose.yml`, —Å—Ç—Ä–æ–∫–∞ 1  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–∏—Ç—å –¥–æ `3.9` –∏–ª–∏ —É–±—Ä–∞—Ç—å (–¥–ª—è Compose v2+)

### 7. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ resource limits
**–§–∞–π–ª:** `docker-compose.yml`  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å `deploy.resources.limits`

### 8. –ó–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è Python
**–§–∞–π–ª:** `Dockerfile`, —Å—Ç—Ä–æ–∫–∏ 4, 35  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `ARG PYTHON_VERSION`

### 9. –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ proxy –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
**–§–∞–π–ª:** `docker-compose.yml`, —Å—Ç—Ä–æ–∫–∏ 8-17, 38-46  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –£–ø—Ä–æ—Å—Ç–∏—Ç—å, —É–±—Ä–∞—Ç—å –ø—É—Å—Ç—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

### 10. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ cache mounts
**–§–∞–π–ª:** `Dockerfile`, —Å—Ç—Ä–æ–∫–∞ 30  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å `--mount=type=cache` –¥–ª—è uv

---

## üü¢ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (P2)

### 11. –ò–º–µ–Ω–æ–≤–∞–Ω–Ω–∞—è —Å–µ—Ç—å
**–§–∞–π–ª:** `docker-compose.yml`  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é —Å–µ—Ç—å –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏

### 12. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞ –≤ run-tobs.sh
**–§–∞–π–ª:** `run-tobs.sh`  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –æ–±—Ä–∞–∑–∞

### 13. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ GID
**–§–∞–π–ª:** `run-tobs.sh`  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å GID render –≥—Ä—É–ø–ø—ã

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚ö° **–í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏:** -20-30% (—Å cache mounts –∏ uv sync)
- üì¶ **–†–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞:** -50-100 MB (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- üîí **–ü—Ä–∏–≤–∏–ª–µ–≥–∏–∏:** –ó–∞–ø—É—Å–∫ –æ—Ç –Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- üõ°Ô∏è **Resource limits:** –ó–∞—â–∏—Ç–∞ —Ö–æ—Å—Ç–∞ –æ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏
- ‚úÖ **Healthcheck:** –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è

### –£–¥–æ–±—Å—Ç–≤–æ
- üîß **–ì–∏–±–∫–æ—Å—Ç—å:** –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –≤–µ—Ä—Å–∏–π –∏ GID
- üöÄ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- üìù **–ü—Ä–æ—Å—Ç–æ—Ç–∞:** –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

---

## üöÄ –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### –≠—Ç–∞–ø 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (30 –º–∏–Ω—É—Ç)
1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å Dockerfile (uv sync)
2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å run-tobs.sh (—É–±—Ä–∞—Ç—å root)
3. –î–æ–±–∞–≤–∏—Ç—å healthcheck

### –≠—Ç–∞–ø 2: –í–∞–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (1 —á–∞—Å)
4. –û–±–Ω–æ–≤–∏—Ç—å –≤–µ—Ä—Å–∏–∏ (uv, compose)
5. –ò—Å–ø—Ä–∞–≤–∏—Ç—å GID (–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ)
6. –î–æ–±–∞–≤–∏—Ç—å resource limits
7. –î–æ–±–∞–≤–∏—Ç—å ARG –¥–ª—è Python
8. –£–ø—Ä–æ—Å—Ç–∏—Ç—å proxy –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
9. –î–æ–±–∞–≤–∏—Ç—å cache mounts

### –≠—Ç–∞–ø 3: –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (30 –º–∏–Ω—É—Ç)
10. –î–æ–±–∞–≤–∏—Ç—å –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—É—é —Å–µ—Ç—å
11. –£–ª—É—á—à–∏—Ç—å run-tobs.sh (–ø—Ä–æ–≤–µ—Ä–∫–∏, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è)

**–û–±—â–µ–µ –≤—Ä–µ–º—è:** ~2 —á–∞—Å–∞

---

## üìù –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –°–º. –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –≤:
- **[DOCKER_OPTIMIZED.md](DOCKER_OPTIMIZED.md)** - –ü–æ–ª–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ

–°–º. –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –≤:
- **[DOCKER_ANALYSIS.md](DOCKER_ANALYSIS.md)** - –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### Dockerfile
- [ ] –ó–∞–º–µ–Ω–∏—Ç—å `uv pip compile` + `uv pip install` –Ω–∞ `uv sync`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –≤–µ—Ä—Å–∏—é uv –¥–æ latest
- [ ] –î–æ–±–∞–≤–∏—Ç—å ARG –¥–ª—è –≤–µ—Ä—Å–∏–∏ Python
- [ ] –î–æ–±–∞–≤–∏—Ç—å cache mount –¥–ª—è uv
- [ ] –î–æ–±–∞–≤–∏—Ç—å healthcheck
- [ ] –£–ª—É—á—à–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

### docker-compose.yml
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –≤–µ—Ä—Å–∏—é (–∏–ª–∏ —É–±—Ä–∞—Ç—å –¥–ª—è v2+)
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –¥–ª—è RENDER_GID
- [ ] –£–ø—Ä–æ—Å—Ç–∏—Ç—å proxy –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- [ ] –î–æ–±–∞–≤–∏—Ç—å resource limits
- [ ] –î–æ–±–∞–≤–∏—Ç—å healthcheck
- [ ] –î–æ–±–∞–≤–∏—Ç—å ARG –¥–ª—è Python –≤–µ—Ä—Å–∏–∏

### run-tobs.sh
- [ ] –£–±—Ä–∞—Ç—å `--user root`
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å RENDER_GID
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –æ–±—Ä–∞–∑–∞
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ø—É—Ç–µ–π

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- **[DOCKER_ANALYSIS.md](DOCKER_ANALYSIS.md)** - –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º
- **[DOCKER_OPTIMIZED.md](DOCKER_OPTIMIZED.md)** - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ —Ñ–∞–π–ª–æ–≤
- **[DOCKER_QUICKSTART.md](../DOCKER_QUICKSTART.md)** - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (P0) –∏ –≤–∞–∂–Ω—ã–µ (P1) –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**

–≠—Ç–æ —É–ª—É—á—à–∏—Ç:
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–∑–∞–ø—É—Å–∫ –æ—Ç –Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—É—Å–∫–æ—Ä–µ–Ω–∏–µ —Å–±–æ—Ä–∫–∏ –Ω–∞ 20-30%)
- –£–¥–æ–±—Å—Ç–≤–æ (–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è, –≥–∏–±–∫–æ—Å—Ç—å)

**–í—Ä–µ–º—è:** ~1.5 —á–∞—Å–∞  
**–†–∏—Å–∫:** –ù–∏–∑–∫–∏–π (–≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã)

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 2025-01-27  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é

