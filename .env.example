# ============================================================================
# TOBS (Telegram Observer) Configuration - Complete Reference
# ============================================================================

# ----------------------------------------------------------------------------
# Telegram API (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û / REQUIRED)
# ----------------------------------------------------------------------------
API_ID=your_api_id_here
API_HASH=your_api_hash_here
PHONE_NUMBER=your_phone_number_here
SESSION_NAME=tobs_session

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Takeout API (–±–æ–ª–µ–µ –Ω–∞–¥—ë–∂–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏—Ö —á–∞—Ç–æ–≤)
USE_TAKEOUT=true
TAKEOUT_FALLBACK_DELAY=1.0

# –ü—Ä–æ–∫—Å–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ / optional)
# PROXY_TYPE=socks5                   # socks5 | http | mtproto
# PROXY_ADDR=127.0.0.1
# PROXY_PORT=1080

# ----------------------------------------------------------------------------
# –ü—É—Ç–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞ / Export Paths
# ----------------------------------------------------------------------------
EXPORT_PATH=./exports
EXPORT_TARGETS=""                     # –°–ø–∏—Å–æ–∫ ID —á–∞—Ç–æ–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫
MEDIA_SUBDIR=media
CACHE_SUBDIR=cache
MONITORING_SUBDIR=monitoring

# –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
CACHE_FILE=./tobs_cache.json
TRANSCRIPTION_CACHE_DIR=              # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: {EXPORT_PATH}/.cache/transcriptions

# ----------------------------------------------------------------------------
# –†–µ–∂–∏–º—ã —ç–∫—Å–ø–æ—Ä—Ç–∞ / Export Modes
# ----------------------------------------------------------------------------
# –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (—Å –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏)
ONLY_NEW=true

# –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç (–ø–∞–ø–∫–∏ –ø–æ —á–∞—Ç–∞–º/–∫–∞–Ω–∞–ª–∞–º)
USE_STRUCTURED_EXPORT=true

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞–ø–∫–∏ –ø–æ —Å—É—â–Ω–æ—Å—Ç—è–º (–≤–º–µ—Å—Ç–æ –ø–ª–æ—Å–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã)
USE_ENTITY_FOLDERS=true

# –°–µ–ª–µ–∫—Ç–∏–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–µ–¥–∏–∞
DOWNLOAD_PHOTOS=true
DOWNLOAD_VIDEOS=true
DOWNLOAD_AUDIO=true
DOWNLOAD_OTHER=true

# –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (–¥–ª—è –∫–∞–Ω–∞–ª–æ–≤)
EXPORT_COMMENTS=false

# –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–µ–¥–∏–∞
ASYNC_MEDIA_DOWNLOAD=true
ASYNC_DOWNLOAD_WORKERS=0              # 0 = auto (—è–¥—Ä–∞ / 2)

# –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
ENABLE_PARALLEL_DOWNLOAD=true
PARALLEL_DOWNLOAD_MIN_SIZE_MB=5       # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª–∏
MAX_PARALLEL_CONNECTIONS=4
MAX_CONCURRENT_DOWNLOADS=2

# –†–µ–∂–∏–º –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
PERSISTENT_DOWNLOAD_MODE=true
PERSISTENT_MIN_SIZE_MB=0.5            # –§–∞–π–ª—ã > —ç—Ç–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –ø–µ—Ä–µ—Å—ã–ª–∞—é—Ç—Å—è –Ω–∞–¥—ë–∂–Ω–µ–µ

# ----------------------------------------------------------------------------
# –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å / Performance
# ----------------------------------------------------------------------------
PERFORMANCE_PROFILE=balanced          # conservative | balanced | aggressive
WORKERS=8                             # –í–æ—Ä–∫–µ—Ä—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
DOWNLOAD_WORKERS=12                   # –í–æ—Ä–∫–µ—Ä—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –º–µ–¥–∏–∞
FFMPEG_WORKERS=4                      # –í–æ—Ä–∫–µ—Ä—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ/–∞—É–¥–∏–æ

# –®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–ª—è –≠—Ç–∞–ø–∞ 1)
# üöÄ –£—Å–∫–æ—Ä–µ–Ω–∏–µ: 6-8x –¥–ª—è —á–∞—Ç–æ–≤ —Å 10k+ —Å–æ–æ–±—â–µ–Ω–∏–π
ENABLE_SHARD_FETCH=false              # true = –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞–º ID
SHARD_COUNT=8                         # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –≤–æ—Ä–∫–µ—Ä–æ–≤ (1-32)
SHARD_CHUNK_SIZE=1000                 # –†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ —Å–æ–æ–±—â–µ–Ω–∏–π (100-1000, –ª–∏–º–∏—Ç Takeout)

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
ENABLE_PERFORMANCE_MONITORING=true
PERFORMANCE_LOG_INTERVAL=60           # –ò–Ω—Ç–µ—Ä–≤–∞–ª –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (—Å–µ–∫—É–Ω–¥—ã)

# –õ–∏–º–∏—Ç—ã –∏ –∑–∞—â–∏—Ç–∞
MAX_ERROR_RATE=0.1                    # –ú–∞–∫—Å–∏–º—É–º –æ—à–∏–±–æ–∫ –ø–µ—Ä–µ–¥ –æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π (0-1)
ERROR_COOLDOWN_TIME=300               # –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –æ—à–∏–±–æ–∫ (—Å–µ–∫)
MAX_FILE_SIZE_MB=2000                 # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
MAX_TOTAL_SIZE_GB=100                 # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä —ç–∫—Å–ø–æ—Ä—Ç–∞

# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º
DIALOG_FETCH_LIMIT=20                 # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∏–∞–ª–æ–≥–æ–≤ –¥–ª—è –ø–æ–∫–∞–∑–∞
REQUEST_DELAY=0.5                     # –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ –∫ API (—Å–µ–∫)

# ----------------------------------------------------------------------------
# –ú–µ–¥–∏–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ / Media Processing
# ----------------------------------------------------------------------------
IMAGE_QUALITY=85                      # –ö–∞—á–µ—Å—Ç–≤–æ JPEG —Å–∂–∞—Ç–∏—è (1-100)
VIDEO_CRF=28                          # CRF –¥–ª—è ffmpeg (0-51, –Ω–∏–∂–µ = –ª—É—á—à–µ)
VIDEO_PRESET=fast                     # ffmpeg preset: ultrafast | fast | medium | slow
HW_ACCELERATION=vaapi                 # intel | nvidia | amd | none
USE_H265=false                        # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å H.265 (HEVC) –∫–æ–¥–µ–∫

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π
PROCESS_IMAGES=true
PROCESS_AUDIO=true
PROCESS_VIDEO=false                   # –í–Ω–∏–º–∞–Ω–∏–µ: —Ç—Ä–µ–±—É–µ—Ç ffmpeg

# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±—É—Ñ–µ—Ä–æ–≤
EXPORT_BUFFER_SIZE=524288             # –ë—É—Ñ–µ—Ä —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (512KB, NVMe: 1048576, SATA SSD: 524288)
MEDIA_COPY_CHUNK_SIZE=8388608         # –†–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ (8MB)

# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫—ç—à–∞
SENDER_CACHE_SIZE=10000               # –†–∞–∑–º–µ—Ä LRU –∫—ç—à–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–π
PREFETCH_BATCH_SIZE=100               # –†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ prefetch (Telegram API max)
PREFETCH_LOOKAHEAD=2                  # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞—Ç—á–µ–π –≤ –±—É—Ñ–µ—Ä–µ

# ----------------------------------------------------------------------------
# –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π / Transcription (Whisper)
# ----------------------------------------------------------------------------
ENABLE_TRANSCRIPTION=true

# –ú–æ–¥–µ–ª—å –¥–ª—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏
TRANSCRIPTION_MODEL=faster-whisper-large-v3

# –Ø–∑—ã–∫ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞
TRANSCRIPTION_LANGUAGE=ru             # ru | en | auto (–ø—É—Å—Ç–æ = –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ)
TRANSCRIPTION_DEVICE=auto              # cpu | cuda | mps | auto
TRANSCRIPTION_COMPUTE_TYPE=int8       # int8 | float16 | float32 | auto

# –ë–∞—Ç—á-–æ–±—Ä–∞–±–æ—Ç–∫–∞
TRANSCRIPTION_USE_BATCHED=true        # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å batched mode
TRANSCRIPTION_BATCH_SIZE=8            # –†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ (4-8 –¥–ª—è CPU, 16+ –¥–ª—è GPU)
TRANSCRIPTION_DURATION_THRESHOLD=60   # –ü–æ—Ä–æ–≥ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è batched (—Å–µ–∫)
TRANSCRIPTION_MAX_CONCURRENT=2        # –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ (0=auto, 1=–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ)
TRANSCRIPTION_SORTING=size_asc        # none | size_asc | size_desc

# –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–π
TRANSCRIPTION_CACHE_ENABLED=true
# TRANSCRIPTION_CACHE_DIR=              # –ü—É—Å—Ç–æ = {EXPORT_PATH}/.cache/transcriptions

# –¢–∞–π–º–∞—É—Ç—ã
TRANSCRIPTION_TIMEOUT=1800.0          # –¢–∞–π–º–∞—É—Ç –Ω–∞ –æ–¥–Ω—É —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—é (—Å–µ–∫)
WHISPER_UNLOAD_TIMEOUT=60             # –ê–≤—Ç–æ—Ä–∞–∑–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ (—Å–µ–∫)

# ----------------------------------------------------------------------------
# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ / Logging
# ----------------------------------------------------------------------------
LOG_LEVEL=INFO                        # DEBUG | INFO | WARNING | ERROR
