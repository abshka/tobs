# ============================================================================
# TOBS (Telegram Observer) Configuration
# ============================================================================

# ----------------------------------------------------------------------------
# Telegram API (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)
# ----------------------------------------------------------------------------
API_ID=your_api_id
API_HASH=your_api_hash
PHONE_NUMBER=your_number
SESSION_NAME=sessions/tobs_session
USE_TAKEOUT=True

# ----------------------------------------------------------------------------
# –ü—É—Ç–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞
# ----------------------------------------------------------------------------
EXPORT_PATH=export
# CACHE_FILE=./tobs_cache.json

# ----------------------------------------------------------------------------
# –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
# ----------------------------------------------------------------------------
# conservative | balanced | aggressive
PERFORMANCE_PROFILE=balanced
# –í–æ—Ä–∫–µ—Ä—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
WORKERS=8
# –í–æ—Ä–∫–µ—Ä—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –º–µ–¥–∏–∞
DOWNLOAD_WORKERS=12
# –í–æ—Ä–∫–µ—Ä—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ/–∞—É–¥–∏–æ
FFMPEG_WORKERS=4

# –®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–ª—è –≠—Ç–∞–ø–∞ 1)
# üöÄ –£—Å–∫–æ—Ä–µ–Ω–∏–µ: 6-8x –¥–ª—è —á–∞—Ç–æ–≤ —Å 10k+ —Å–æ–æ–±—â–µ–Ω–∏–π (—Ç—Ä–µ–±—É–µ—Ç Takeout)
# true = –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–æ)
ENABLE_SHARD_FETCH=true
# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –≤–æ—Ä–∫–µ—Ä–æ–≤
SHARD_COUNT=8
# –†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ —Å–æ–æ–±—â–µ–Ω–∏–π (Takeout limit)
SHARD_CHUNK_SIZE=1000

# ----------------------------------------------------------------------------
# –ú–µ–¥–∏–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞
# ----------------------------------------------------------------------------
# –ö–∞—á–µ—Å—Ç–≤–æ JPEG (1-100)
IMAGE_QUALITY=85
# CRF –¥–ª—è ffmpeg (–Ω–∏–∂–µ = –ª—É—á—à–µ –∫–∞—á–µ—Å—Ç–≤–æ)
VIDEO_CRF=35
# ffmpeg preset: ultrafast | fast | medium | slow
VIDEO_PRESET=fast
# –ê–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ: intel | nvidia | amd | none
HW_ACCELERATION=none
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å H.265 –∫–æ–¥–µ–∫
USE_H265=false

# ----------------------------------------------------------------------------
# –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (Whisper)
# ----------------------------------------------------------------------------
ENABLE_TRANSCRIPTION=true

# –ú–æ–¥–µ–ª—å –¥–ª—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏
TRANSCRIPTION_MODEL=faster-whisper-large-v3

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏
# TRANSCRIPTION_LANGUAGE=ru           # –Ø–∑—ã–∫ (–ø—É—Å—Ç–æ = –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ)
# –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: cpu | cuda | auto
TRANSCRIPTION_DEVICE=auto
# –¢–∏–ø –≤—ã—á–∏—Å–ª–µ–Ω–∏–π: int8 | float16 | float32
TRANSCRIPTION_COMPUTE_TYPE=int8
# –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
TRANSCRIPTION_CACHE_ENABLED=true

# Batched inference (–¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –¥–ª–∏–Ω–Ω—ã—Ö –∞—É–¥–∏–æ)
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å batched mode
TRANSCRIPTION_USE_BATCHED=true
# –†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ (4-8 –¥–ª—è CPU, 16 –¥–ª—è GPU)
TRANSCRIPTION_BATCH_SIZE=8
# –ü–æ—Ä–æ–≥ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è batched mode (—Å–µ–∫—É–Ω–¥—ã)
TRANSCRIPTION_DURATION_THRESHOLD=60

# ----------------------------------------------------------------------------
# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
# ----------------------------------------------------------------------------
# DEBUG | INFO | WARNING | ERROR
LOG_LEVEL=INFO

# ----------------------------------------------------------------------------
# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
# ----------------------------------------------------------------------------
# –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
EXPORT_COMMENTS=false
# –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ –∫ Telegram API (—Å–µ–∫—É–Ω–¥—ã)
REQUEST_DELAY=0.5
# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∏–∞–ª–æ–≥–æ–≤ –¥–ª—è –ø–æ–∫–∞–∑–∞ –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ
DIALOG_FETCH_LIMIT=20

# ----------------------------------------------------------------------------
# –ü—Ä–æ–∫—Å–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
# ----------------------------------------------------------------------------
# PROXY_TYPE=http                     # socks5 | http | mtproto
# PROXY_ADDR=127.0.0.1
# PROXY_PORT=2080

# ----------------------------------------------------------------------------
# Advanced Settings
# ----------------------------------------------------------------------------
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
ENABLE_PERFORMANCE_MONITORING=true
# –ò–Ω—Ç–µ—Ä–≤–∞–ª –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (—Å–µ–∫—É–Ω–¥—ã)
PERFORMANCE_LOG_INTERVAL=60
# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫
MAX_ERROR_RATE=0.1
# –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –æ—à–∏–±–æ–∫ (—Å–µ–∫—É–Ω–¥—ã)
ERROR_COOLDOWN_TIME=300
# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (–ú–ë)
MAX_FILE_SIZE_MB=2000
# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä —ç–∫—Å–ø–æ—Ä—Ç–∞ (–ì–ë)
MAX_TOTAL_SIZE_GB=100

# ============================================================================
# –†–µ–∂–∏–º—ã —ç–∫—Å–ø–æ—Ä—Ç–∞ (Export Modes) - –¥–æ–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
# ============================================================================
# EXPORT_TARGETS=                    # –°–ø–∏—Å–æ–∫ ID —á–∞—Ç–æ–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
# –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
ONLY_NEW=true
# –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç (–ø–∞–ø–∫–∏ –ø–æ —á–∞—Ç–∞–º)
USE_STRUCTURED_EXPORT=true
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞–ø–∫–∏ –ø–æ —Å—É—â–Ω–æ—Å—Ç—è–º
USE_ENTITY_FOLDERS=true
# –ü–æ–¥–ø–∞–ø–∫–∞ –¥–ª—è –º–µ–¥–∏–∞
MEDIA_SUBDIR=media
# –ü–æ–¥–ø–∞–ø–∫–∞ –¥–ª—è –∫—ç—à–∞
CACHE_SUBDIR=cache
# –ü–æ–¥–ø–∞–ø–∫–∞ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
MONITORING_SUBDIR=monitoring

# –°–µ–ª–µ–∫—Ç–∏–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–µ–¥–∏–∞
# –ó–∞–≥—Ä—É–∂–∞—Ç—å —Ñ–æ—Ç–æ
DOWNLOAD_PHOTOS=true
# –ó–∞–≥—Ä—É–∂–∞—Ç—å –≤–∏–¥–µ–æ
DOWNLOAD_VIDEOS=true
# –ó–∞–≥—Ä—É–∂–∞—Ç—å –∞—É–¥–∏–æ
DOWNLOAD_AUDIO=true
# –ó–∞–≥—Ä—É–∂–∞—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
DOWNLOAD_OTHER=true

# –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
# –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–µ–¥–∏–∞
ASYNC_MEDIA_DOWNLOAD=true
# 0 = auto (—è–¥—Ä–∞ / 2)
ASYNC_DOWNLOAD_WORKERS=0

# –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
# –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
ENABLE_PARALLEL_DOWNLOAD=true
# –ú–∏–Ω–∏–º—É–º —Ä–∞–∑–º–µ—Ä –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª–∏
PARALLEL_DOWNLOAD_MIN_SIZE_MB=5
# –ú–∞–∫—Å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
MAX_PARALLEL_CONNECTIONS=4
# –ú–∞–∫—Å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–≥—Ä—É–∑–æ–∫
MAX_CONCURRENT_DOWNLOADS=2

# –†–µ–∂–∏–º –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
# –†–µ–∂–∏–º –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
PERSISTENT_DOWNLOAD_MODE=true
# –ú–∏–Ω–∏–º—É–º —Ä–∞–∑–º–µ—Ä –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
PERSISTENT_MIN_SIZE_MB=0.5

# ============================================================================
# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–¥–∏–∞ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π (Media Processing Control)
# ============================================================================
# –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
PROCESS_IMAGES=true
# –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∞—É–¥–∏–æ
PROCESS_AUDIO=true
# –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤–∏–¥–µ–æ (—Ç—Ä–µ–±—É–µ—Ç ffmpeg)
PROCESS_VIDEO=false

# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±—É—Ñ–µ—Ä–æ–≤ –∏ –∫—ç—à–∞
# –ë—É—Ñ–µ—Ä —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (512KB, NVMe: 1048576, SATA SSD: 524288)
EXPORT_BUFFER_SIZE=1048576
# –†–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ (8MB)
MEDIA_COPY_CHUNK_SIZE=8388608
# –†–∞–∑–º–µ—Ä LRU –∫—ç—à–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–π
SENDER_CACHE_SIZE=10000

# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è prefetch pipeline
# –†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ prefetch (Telegram API max)
PREFETCH_BATCH_SIZE=100
# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞—Ç—á–µ–π –≤ –±—É—Ñ–µ—Ä–µ
PREFETCH_LOOKAHEAD=2

# ============================================================================
# –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ (Extended Transcription)
# ============================================================================
# –ó–∞–¥–µ—Ä–∂–∫–∞ –ø—Ä–∏ fallback –Ω–∞ Takeout
TAKEOUT_FALLBACK_DELAY=1.0

# –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
# –ú–∞–∫—Å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–π (0=auto)
TRANSCRIPTION_MAX_CONCURRENT=2
# none | size_asc | size_desc
TRANSCRIPTION_SORTING=size_asc

# –ö—ç—à –∏ —Ç–∞–π–º–∞—É—Ç—ã
# TRANSCRIPTION_CACHE_DIR=              # –ü—É—Å—Ç–æ = {EXPORT_PATH}/.cache/transcriptions
# –¢–∞–π–º–∞—É—Ç –Ω–∞ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—é (—Å–µ–∫)
TRANSCRIPTION_TIMEOUT=1800.0
# –ê–≤—Ç–æ—Ä–∞–∑–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ (—Å–µ–∫)
WHISPER_UNLOAD_TIMEOUT=60
